# 图形学

#### 切线空间
在用法线贴图的时候，如果表面的朝向和法线贴图的坐标系不一致的话结果就会有问题。

比如给一张法相贴图，如果不经过处理，那么这个贴图只能描述空间当中朝向特定方向的法线。切线空间就是把这个固定朝向的法线变换到另外一个朝向的矩阵。这个矩阵在实现raytracing的brdf中就用到了。

T(tangent)  切线。向右。

B(bitangent)  副切线。可以通过切线和法线求出来。

N(normal) 相当于z轴，永远朝上。
实际上是一种坐标变换。把局部坐标系（以正z轴为表面法线的法线贴图）中的法线变换到以用到这个法相贴图的物体的表面法向量为基准的全局坐标系中。这个矩阵的三个列就是TBN。相当于这个局部坐标系相对于世界坐标的基。

#### 视差贴图


#### PBR

>辐射通量 的单位是watt，也就是功率。从物理上来讲，光源的辐射通量是一个积分。表示的时候一般就用rgb表示。但是rgb与


#### 关于颜色的表示

颜色其实是一个能量分布的积分（单位watt）。比较精确的表示是这样的：

```
template<int nSamples>
struct Spectrum
{
    float c[nSamples];
};
```
这一些列系数其实是一个基的系数。比如用高斯函数作为基。这样的话，一个Spectrum示例就可以表示一个复杂的概率密度分布了。

还可以直接把这个数组当作能量分布的采样点，也就是把光谱能量分布S(λ)离散化。给定一个具有n个（波长，能量）的采样点，构造一个具有m个采样点的Spectrum。这里面涉及到一些简单的计算。也就是把n个采样点重新平均到m个采样点上。

#### 采样的颜色表示转换为RGB颜色表示

因为人的眼睛对三种颜色比较敏感，所以可以用三个分量来作为一组基表示颜色。这也是为什么好多颜色空间都用三个分量来表示。
我们知道一个光谱的能量分布为S(λ)，
